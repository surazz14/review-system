{"ast":null,"code":"import _regeneratorRuntime from\"/Users/suraj/project/paypay/review-system/review-system-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import{types,flow}from\"mobx-state-tree\";import generalAction from\"../generalActions\";import Member from\"./member\";import Store from\"../setUpStore\";var collection=types.model(\"members\",{members:types.optional(types.array(Member),[])}).actions(generalAction).actions(function(self){return{getAllMember:flow(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return self.getRequest(\"/user\")();case 3:response=_context.sent;self.members=response.users;return _context.abrupt(\"return\",response);case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);throw _context.t0;case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);})),addMember:flow(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(member){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return self.postRequest(\"/user\")(member);case 3:response=_context2.sent;self.members=response.users;return _context2.abrupt(\"return\",response);case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);throw _context2.t0;case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,8]]);})),assignMember:flow(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(currentMember,selectedMembers){var payload,response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;payload={assigned:selectedMembers.map(function(member){return member._id;})};_context3.next=4;return self.putRequest(\"/user/assign/\".concat(currentMember._id))(payload);case 4:response=_context3.sent;self.members=response.users;return _context3.abrupt(\"return\",response);case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](0);throw _context3.t0;case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[0,9]]);})),editMember:flow(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(member,_id){var response;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return self.putRequest(\"/user/\".concat(_id))(member);case 3:response=_context4.sent;self.members=response.users;return _context4.abrupt(\"return\",response);case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](0);throw _context4.t0;case 11:case\"end\":return _context4.stop();}}},_callee4,null,[[0,8]]);})),deleteMember:flow(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(_id){var response;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return self.deleteRequest(\"/user/\".concat(_id))();case 3:response=_context5.sent;self.members=response.users;return _context5.abrupt(\"return\",response);case 8:_context5.prev=8;_context5.t0=_context5[\"catch\"](0);throw _context5.t0;case 11:case\"end\":return _context5.stop();}}},_callee5,null,[[0,8]]);}))};}).views(function(self){return{normalizedAssignedUser:function normalizedAssignedUser(memberIds){var members=[];memberIds.forEach(function(_id){var member=self.members.find(function(member){return member._id===_id;});if(member){members.push(member);}});return members;},get membersExceptMe(){return self.members.filter(function(member){return member._id!==Store.user._id;});},membersExcept:function membersExcept(_id,members){return members.filter(function(member){return member._id!==_id;});}};});export default collection;","map":{"version":3,"sources":["/Users/suraj/project/paypay/review-system/review-system-client/src/entities/member/memberCollection.ts"],"names":["types","flow","generalAction","Member","Store","collection","model","members","optional","array","actions","self","getAllMember","getRequest","response","users","addMember","member","postRequest","assignMember","currentMember","selectedMembers","payload","assigned","map","_id","putRequest","editMember","deleteMember","deleteRequest","views","normalizedAssignedUser","memberIds","forEach","find","push","membersExceptMe","filter","user","membersExcept"],"mappings":"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","sourcesContent":["import { types, flow } from \"mobx-state-tree\";\nimport generalAction from \"../generalActions\";\nimport Member from \"./member\";\nimport Store from \"../setUpStore\";\n\nconst collection = types\n  .model(\"members\", {\n    members: types.optional(types.array(Member), []),\n  })\n  .actions(generalAction)\n  .actions((self) => ({\n    getAllMember: flow(function* () {\n      try {\n        const response = yield self.getRequest(\"/user\")();\n        self.members = response.users;\n        return response;\n      } catch (e) {\n        throw e;\n      }\n    }),\n\n    addMember: flow(function* (member: any) {\n      try {\n        const response = yield self.postRequest(\"/user\")(member);\n        self.members = response.users;\n        return response;\n      } catch (e) {\n        throw e;\n      }\n    }),\n\n    assignMember: flow(function* (currentMember: any, selectedMembers: any) {\n      try {\n        const payload = {\n          assigned: selectedMembers.map((member: any) => member._id),\n        };\n        const response = yield self.putRequest(\n          `/user/assign/${currentMember._id}`\n        )(payload);\n        self.members = response.users;\n        return response;\n      } catch (e) {\n        throw e;\n      }\n    }),\n\n    editMember: flow(function* (member: any, _id: any) {\n      try {\n        const response = yield self.putRequest(`/user/${_id}`)(member);\n        self.members = response.users;\n        return response;\n      } catch (e) {\n        throw e;\n      }\n    }),\n\n    deleteMember: flow(function* (_id: any) {\n      try {\n        const response = yield self.deleteRequest(`/user/${_id}`)();\n        self.members = response.users;\n        return response;\n      } catch (e) {\n        throw e;\n      }\n    }),\n  }))\n\n  .views((self) => ({\n    normalizedAssignedUser(memberIds: any) {\n      const members: any = [];\n      memberIds.forEach((_id: string) => {\n        const member = self.members.find((member) => member._id === _id);\n        if (member) {\n          members.push(member);\n        }\n      });\n      return members;\n    },\n\n    get membersExceptMe() {\n      return self.members.filter((member) => member._id !== Store.user._id);\n    },\n\n    membersExcept(_id: string, members: any) {\n      return members.filter((member: any) => member._id !== _id);\n    },\n  }));\n\nexport default collection;\n"]},"metadata":{},"sourceType":"module"}