{"ast":null,"code":"import _regeneratorRuntime from\"/Users/suraj/project/paypay/review-system/review-system-client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import{types,flow}from\"mobx-state-tree\";import generalAction from\"../generalActions\";import apphistory from\"apphistory\";export var roleType;(function(roleType){roleType[\"admin\"]=\"admin\";roleType[\"member\"]=\"member\";})(roleType||(roleType={}));var User=types.model(\"user\",{_id:types.string,name:types.string,email:types.string,address:types.string,position:types.string,token:types.string,role:types.string}).actions(generalAction).actions(function(self){return{login:flow(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(loginData){var user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return self.postRequest(\"/user/login\")(loginData);case 3:user=_context.sent;self._id=user._id;self.email=user.email;self.address=user.address;self.position=user.position;self.token=user.token;self.role=user.role;apphistory.push(\"/review\");return _context.abrupt(\"return\",user);case 14:_context.prev=14;_context.t0=_context[\"catch\"](0);throw _context.t0;case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,14]]);})),logout:function logout(){self.token=\"\";apphistory.push(\"/\");}};});export default User;","map":{"version":3,"sources":["/Users/suraj/project/paypay/review-system/review-system-client/src/entities/user/user.ts"],"names":["types","flow","generalAction","apphistory","roleType","User","model","_id","string","name","email","address","position","token","role","actions","self","login","loginData","postRequest","user","push","logout"],"mappings":"4KAAA,OAASA,KAAT,CAAgBC,IAAhB,KAA4B,iBAA5B,CACA,MAAOC,CAAAA,aAAP,KAA0B,mBAA1B,CACA,MAAOC,CAAAA,UAAP,KAAuB,YAAvB,CAEA,UAAYC,CAAAA,QAAZ,C,UAAYA,Q,EAAAA,Q,kBAAAA,Q,uBAAAA,Q,GAAAA,Q,MAKZ,GAAMC,CAAAA,IAAI,CAAGL,KAAK,CACfM,KADU,CACJ,MADI,CACI,CACbC,GAAG,CAAEP,KAAK,CAACQ,MADE,CAEbC,IAAI,CAAET,KAAK,CAACQ,MAFC,CAGbE,KAAK,CAAEV,KAAK,CAACQ,MAHA,CAIbG,OAAO,CAAEX,KAAK,CAACQ,MAJF,CAKbI,QAAQ,CAAEZ,KAAK,CAACQ,MALH,CAMbK,KAAK,CAAEb,KAAK,CAACQ,MANA,CAObM,IAAI,CAAEd,KAAK,CAACQ,MAPC,CADJ,EAUVO,OAVU,CAUFb,aAVE,EAWVa,OAXU,CAWF,SAACC,IAAD,QAAW,CAElBC,KAAK,CAAEhB,IAAI,uCAAC,iBAAWiB,SAAX,2JAEU,MAAMF,CAAAA,IAAI,CAACG,WAAL,CAAiB,aAAjB,EAAgCD,SAAhC,CAAN,CAFV,OAEFE,IAFE,eAGRJ,IAAI,CAACT,GAAL,CAAWa,IAAI,CAACb,GAAhB,CACAS,IAAI,CAACN,KAAL,CAAaU,IAAI,CAACV,KAAlB,CACAM,IAAI,CAACL,OAAL,CAAeS,IAAI,CAACT,OAApB,CACAK,IAAI,CAACJ,QAAL,CAAgBQ,IAAI,CAACR,QAArB,CACAI,IAAI,CAACH,KAAL,CAAaO,IAAI,CAACP,KAAlB,CACAG,IAAI,CAACF,IAAL,CAAYM,IAAI,CAACN,IAAjB,CACAX,UAAU,CAACkB,IAAX,CAAgB,SAAhB,EATQ,gCAUDD,IAVC,mJAAD,EAFO,CAkBlBE,MAAM,CAAE,iBAAM,CACZN,IAAI,CAACH,KAAL,CAAa,EAAb,CACAV,UAAU,CAACkB,IAAX,CAAgB,GAAhB,EACD,CArBiB,CAAX,EAXE,CAAb,CAmCA,cAAehB,CAAAA,IAAf","sourcesContent":["import { types, flow } from \"mobx-state-tree\";\nimport generalAction from \"../generalActions\";\nimport apphistory from \"apphistory\";\n\nexport enum roleType {\n  admin = \"admin\",\n  member = \"member\",\n}\n\nconst User = types\n  .model(\"user\", {\n    _id: types.string,\n    name: types.string,\n    email: types.string,\n    address: types.string,\n    position: types.string,\n    token: types.string,\n    role: types.string,\n  })\n  .actions(generalAction)\n  .actions((self) => ({\n\n    login: flow(function* (loginData: { email: string; password: string }) {\n      try {\n        const user: any = yield self.postRequest(\"/user/login\")(loginData);\n        self._id = user._id;\n        self.email = user.email;\n        self.address = user.address;\n        self.position = user.position;\n        self.token = user.token;\n        self.role = user.role;\n        apphistory.push(\"/review\");\n        return user;\n      } catch (e) {\n        throw e;\n      }\n    }),\n\n    logout: () => {\n      self.token = \"\";\n      apphistory.push(\"/\");\n    },\n  }))\n\nexport default User;\n"]},"metadata":{},"sourceType":"module"}